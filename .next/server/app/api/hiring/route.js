"use strict";(()=>{var e={};e.id=704,e.ids=[704],e.modules={8013:e=>{e.exports=require("mongodb")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6530:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>c,serverHooks:()=>v,staticGenerationAsyncStorage:()=>m});var i={};t.r(i),t.d(i,{POST:()=>l});var s=t(9303),n=t(8716),o=t(670),a=t(7070),p=t(8013);let u=process.env.MONGODB_URI,d=new p.MongoClient(u);async function l(e){try{let r=await e.json();for(let e of(console.log("Received hiringForm:",r),["name","email","phone","eventType","location"]))if(!r.details[e]||"string"==typeof r.details[e]&&""===r.details[e].trim())return a.NextResponse.json({error:`Missing or empty field: details.${e}`},{status:400});if(!Array.isArray(r.details.eventTimes)||0===r.details.eventTimes.length||!r.details.eventTimes[0].eventDate)return a.NextResponse.json({error:"Missing or invalid eventTimes"},{status:400});if(!r.requiredServices.videography.videoCategory?.id)return a.NextResponse.json({error:"Missing videography.videoCategory"},{status:400});await d.connect();let t=d.db().collection("hiringRequests"),i=await t.insertOne({...r,createdAt:new Date});return a.NextResponse.json({message:"Hiring form submitted successfully",id:i.insertedId},{status:201})}catch(e){return console.error("Hiring form failed:",e),a.NextResponse.json({error:"Internal server error"},{status:500})}finally{await d.close()}}let c=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/hiring/route",pathname:"/api/hiring",filename:"route",bundlePath:"app/api/hiring/route"},resolvedPagePath:"C:\\Users\\NITISH SINGHA\\Desktop\\project8\\app\\api\\hiring\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:v}=c,h="/api/hiring/route";function f(){return(0,o.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:m})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[276,972],()=>t(6530));module.exports=i})();