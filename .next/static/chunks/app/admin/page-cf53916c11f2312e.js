(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8583:function(e,a,r){Promise.resolve().then(r.bind(r,4052))},4052:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return Z}});var t=r(7437),s=r(2265),l=r(29),d=r.n(l),i=r(7605),n=r(897),o=r(4367),c=r(7518),x=r(4851),m=r(4101),g=r(3894),u=r(9663),p=r(3247),h=r(740);let y=(0,r(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var b=r(2451),f=r(407),j=r(9064),k=e=>{let{limit:a=10}=e,[r,l]=(0,s.useState)([]),[d,i]=(0,s.useState)(!0),[n,o]=(0,s.useState)(""),[c,x]=(0,s.useState)(1),[m,g]=(0,s.useState)(1),[u,k]=(0,s.useState)(""),[w,v]=(0,s.useState)("all"),[N,S]=(0,s.useState)("joinDate"),[C,Z]=(0,s.useState)("desc"),P=async()=>{i(!0),o("");try{let e=new URLSearchParams({page:c.toString(),limit:a.toString(),sortField:N,sortDirection:C,...u&&{search:u},..."all"!==w&&{status:w}}),r=await fetch("/api/operators?".concat(e.toString())),t=await r.json();if(!r.ok)throw Error(t.error||"Failed to fetch operators");l(t.operators),g(Math.ceil(t.total/a))}catch(e){o(e.message||"An error occurred while fetching operators"),j.Am.error(e.message||"Failed to fetch operators")}finally{i(!1)}};(0,s.useEffect)(()=>{P()},[c,a,u,w,N,C]);let A=e=>{N===e?Z("asc"===C?"desc":"asc"):(S(e),Z("asc"))},L=e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"inactive":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},D=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex flex-col md:flex-row justify-between items-center space-y-3 md:space-y-0",children:[(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x(1)},className:"relative w-full md:w-64",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search operators...",value:u,onChange:e=>k(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),(0,t.jsx)(p.Z,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),(0,t.jsxs)("select",{value:w,onChange:e=>{v(e.target.value),x(1)},className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"}),(0,t.jsx)("option",{value:"pending",children:"Pending"})]})]}),(0,t.jsx)("button",{onClick:()=>P(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Refresh"})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:d?(0,t.jsxs)("div",{className:"flex justify-center items-center py-20",children:[(0,t.jsx)(y,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading operators..."})]}):n?(0,t.jsxs)("div",{className:"p-6 text-center text-red-600 dark:text-red-400",children:[(0,t.jsx)("p",{children:n}),(0,t.jsx)("button",{onClick:()=>P(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Try Again"})]}):0===r.length?(0,t.jsx)("div",{className:"p-6 text-center text-gray-600 dark:text-gray-400",children:(0,t.jsx)("p",{children:"No operators found"})}):(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,t.jsxs)("tr",{children:[(0,t.jsxs)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("operatorId"),children:["Operator ID","operatorId"===N&&(0,t.jsx)("span",{className:"ml-1",children:"asc"===C?"↑":"↓"})]}),(0,t.jsxs)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("name"),children:["Name","name"===N&&(0,t.jsx)("span",{className:"ml-1",children:"asc"===C?"↑":"↓"})]}),(0,t.jsxs)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("email"),children:["Email","email"===N&&(0,t.jsx)("span",{className:"ml-1",children:"asc"===C?"↑":"↓"})]}),(0,t.jsxs)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("location"),children:["Location","location"===N&&(0,t.jsx)("span",{className:"ml-1",children:"asc"===C?"↑":"↓"})]}),(0,t.jsxs)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("status"),children:["Status","status"===N&&(0,t.jsx)("span",{className:"ml-1",children:"asc"===C?"↑":"↓"})]}),(0,t.jsxs)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("joinDate"),children:["Join Date","joinDate"===N&&(0,t.jsx)("span",{className:"ml-1",children:"asc"===C?"↑":"↓"})]}),(0,t.jsxs)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("lastLogin"),children:["Last Login","lastLogin"===N&&(0,t.jsx)("span",{className:"ml-1",children:"asc"===C?"↑":"↓"})]})]})}),(0,t.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.operatorId}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:e.name}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:e.email}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:e.location||"N/A"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(L(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:D(e.joinDate)}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:e.lastLogin?D(e.lastLogin):"Never"})]},e._id))})]})}),!d&&!n&&r.length>0&&(0,t.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 sm:px-6",children:[(0,t.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,t.jsx)("button",{onClick:()=>x(Math.max(1,c-1)),disabled:1===c,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>x(Math.min(m,c+1)),disabled:c===m,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,t.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",(0,t.jsx)("span",{className:"font-medium",children:r.length>0?(c-1)*a+1:0})," to"," ",(0,t.jsx)("span",{className:"font-medium",children:Math.min(c*a,(m-1)*a+r.length)})," ","of ",(0,t.jsx)("span",{className:"font-medium",children:m*a})," results"]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,t.jsxs)("button",{onClick:()=>x(Math.max(1,c-1)),disabled:1===c,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)("span",{className:"sr-only",children:"Previous"}),(0,t.jsx)(b.Z,{className:"h-5 w-5","aria-hidden":"true"})]}),Array.from({length:Math.min(5,m)},(e,a)=>{let r;return r=m<=5?a+1:c<=3?a+1:c>=m-2?m-4+a:c-2+a,(0,t.jsx)("button",{onClick:()=>x(r),className:"relative inline-flex items-center px-4 py-2 border ".concat(c===r?"z-10 bg-blue-50 dark:bg-blue-900 border-blue-500 dark:border-blue-500 text-blue-600 dark:text-blue-200":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"," text-sm font-medium"),children:r},r)}),(0,t.jsxs)("button",{onClick:()=>x(Math.min(m,c+1)),disabled:c===m,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)("span",{className:"sr-only",children:"Next"}),(0,t.jsx)(f.Z,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]})]})},w=()=>(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg",children:(0,t.jsx)(u.Z,{className:"h-6 w-6 text-indigo-600 dark:text-indigo-400"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Operator Management"})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden",children:(0,t.jsx)(k,{limit:10})})]}),v=r(7806),N=()=>{let[e,a]=(0,s.useState)({name:"",email:"",operatorId:"",password:"",confirmPassword:"",role:"operator",location:"",skills:"",status:"active"}),[r,l]=(0,s.useState)(!1),[d,i]=(0,s.useState)(""),n=e=>{let{name:r,value:t}=e.target;a(e=>({...e,[r]:t}))},o=()=>e.name&&e.email&&e.operatorId&&e.password?e.password!==e.confirmPassword?(i("Passwords do not match"),!1):!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(i("Please enter a valid email address"),!1):(i("Please fill all required fields"),!1),c=async r=>{if(r.preventDefault(),i(""),o()){l(!0);try{let r=await fetch("/api/operators",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,email:e.email,operatorId:e.operatorId,password:e.password,role:e.role,location:e.location,skills:e.skills.split(",").map(e=>e.trim()),status:e.status})}),t=await r.json();if(!r.ok)throw Error(t.error||"Failed to create operator");j.Am.success("Operator created successfully"),a({name:"",email:"",operatorId:"",password:"",confirmPassword:"",role:"operator",location:"",skills:"",status:"active"})}catch(e){i(e.message||"An error occurred"),j.Am.error(e.message||"Failed to create operator")}finally{l(!1)}}};return(0,t.jsxs)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,t.jsx)("div",{className:"p-2 bg-teal-100 dark:bg-teal-900 rounded-lg",children:(0,t.jsx)(v.Z,{className:"h-6 w-6 text-teal-600 dark:text-teal-400"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Create New Operator"})]}),d&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:d}),(0,t.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name *"}),(0,t.jsx)("input",{type:"text",name:"name",value:e.name,onChange:n,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address *"}),(0,t.jsx)("input",{type:"email",name:"email",value:e.email,onChange:n,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Operator ID *"}),(0,t.jsx)("input",{type:"text",name:"operatorId",value:e.operatorId,onChange:n,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),(0,t.jsx)("input",{type:"text",name:"location",value:e.location,onChange:n,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 dark:bg-gray-700 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password *"}),(0,t.jsx)("input",{type:"password",name:"password",value:e.password,onChange:n,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password *"}),(0,t.jsx)("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:n,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Skills (comma separated)"}),(0,t.jsx)("input",{type:"text",name:"skills",value:e.skills,onChange:n,placeholder:"Photography, Editing, Drone, etc.",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 dark:bg-gray-700 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,t.jsxs)("select",{name:"status",value:e.status,onChange:n,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 dark:bg-gray-700 dark:text-white",children:[(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"}),(0,t.jsx)("option",{value:"pending",children:"Pending"})]})]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)("button",{type:"submit",disabled:r,className:"w-full md:w-auto px-6 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center space-x-2 disabled:opacity-70",children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{className:"h-5 w-5 animate-spin"}),(0,t.jsx)("span",{children:"Creating..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Create Operator"})]})})})]})]})},S=e=>{let{userType:a,userData:r,onLogout:l}=e,[u,p]=(0,s.useState)(!0),[h,y]=(0,s.useState)("dashboard");return(0,t.jsx)("div",{className:"min-h-screen transition-colors duration-300",children:(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen flex",children:[(0,t.jsx)(i.Z,{sidebarOpen:u,setSidebarOpen:p,activeSection:h,setActiveSection:y,userType:a}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col transition-all duration-300 ".concat(u?"ml-64":"ml-16"),children:[(0,t.jsx)(n.Z,{userData:r,userType:a,onLogout:l}),(0,t.jsxs)("main",{style:{scrollbarWidth:"none",msOverflowStyle:"none"},className:"jsx-c8476cb2fd06bdb8 flex-1 p-6 overflow-auto",children:[(0,t.jsx)(d(),{id:"c8476cb2fd06bdb8",children:"main.jsx-c8476cb2fd06bdb8::-webkit-scrollbar{display:none}"}),(()=>{switch(h){case"dashboard":default:return(0,t.jsx)(o.Z,{});case"bookings":return(0,t.jsx)(c.Z,{});case"team":return(0,t.jsx)(x.Z,{});case"analysis":return(0,t.jsx)(m.Z,{});case"equipment":return(0,t.jsx)(g.Z,{});case"operator":return"admin"===a?(0,t.jsx)(w,{}):(0,t.jsx)(o.Z,{});case"createOperator":return"admin"===a?(0,t.jsx)(N,{}):(0,t.jsx)(o.Z,{})}})()]})]})]})})},C=r(2807);function Z(){let[e,a]=(0,s.useState)(!1),[r,l]=(0,s.useState)("admin"),[d,i]=(0,s.useState)(null);return e?(0,t.jsx)(S,{userType:r,userData:d,onLogout:()=>{a(!1),l("admin"),i(null),localStorage.clear()}}):(0,t.jsx)(C.Z,{onLogin:(e,r)=>{l(e),i(r),a(!0)}})}},407:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}},function(e){e.O(0,[574,64,370,803,971,117,744],function(){return e(e.s=8583)}),_N_E=e.O()}]);