(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[711],{3883:function(e,t,r){Promise.resolve().then(r.bind(r,8257))},8257:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var a=r(7437),n=r(9547),o=r(2265);function s(){let[e,t]=(0,o.useState)(null),[r,n]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("asan_user_id");if(!e){n(!1);return}try{let r=await fetch("/api/user/".concat(e)),a=await r.json();r.ok?t(a):(console.error("User fetch failed:",a.error),localStorage.removeItem("asan_user_id"))}catch(e){console.error("Fetch error:",e),localStorage.removeItem("asan_user_id")}finally{n(!1)}})()},[]),r)?(0,a.jsx)("p",{children:"Loading user..."}):e?(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-gray-100",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold",children:["Welcome, ",e.name]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Role: ",e.role]})]}):(0,a.jsx)("p",{children:"No user logged in"})}function i(){return(0,a.jsx)(n.AppProvider,{children:(0,a.jsx)(s,{})})}},9547:function(e,t,r){"use strict";r.d(t,{AppProvider:function(){return i},b:function(){return s}});var a=r(7437),n=r(2265);let o=(0,n.createContext)(void 0),s=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAppContext must be used within an AppProvider");return e},i=e=>{let{children:t}=e,[r,s]=(0,n.useState)("system"),[i,c]=(0,n.useState)(!1),[l,d]=(0,n.useState)("home"),[u,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1),[w,p]=(0,n.useState)("admin"),[g,k]=(0,n.useState)(null),v=e=>{c(e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},x=e=>{s(e),localStorage.setItem("theme-preference",e),"dark"===e?v(!0):"light"===e?v(!1):v(window.matchMedia("(prefers-color-scheme: dark)").matches)};return(0,n.useEffect)(()=>{let e=localStorage.getItem("theme-preference");e&&["light","dark","system"].includes(e)?(s(e),"system"===e?v(window.matchMedia("(prefers-color-scheme: dark)").matches):v("dark"===e)):(s("system"),v(window.matchMedia("(prefers-color-scheme: dark)").matches))},[]),(0,n.useEffect)(()=>{if("system"!==r)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{v(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[r]),(0,a.jsx)(o.Provider,{value:{darkMode:i,theme:r,setTheme:x,toggleDarkMode:()=>{x(i?"light":"dark")},currentPage:l,setCurrentPage:d,mobileMenuOpen:u,setMobileMenuOpen:m,isLoggedIn:h,setIsLoggedIn:f,userType:w,setUserType:p,userData:g,setUserData:k,navigateToPage:e=>{switch(d(e),m(!1),e){case"home":default:"/"!==window.location.pathname&&(window.location.href="/");break;case"admin":"/admin"!==window.location.pathname&&(window.location.href="/admin");break;case"operator":"/operator"!==window.location.pathname&&(window.location.href="/operator");break;case"hiring":"/hiring"!==window.location.pathname&&(window.location.href="/hiring");break;case"join-us":"/join-us"!==window.location.pathname&&(window.location.href="/join-us")}}},children:t})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3883)}),_N_E=e.O()}]);